<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="appTitle">Prompt Artisan</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Fira+Code:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header-main">
            <h1 id="app-title">Prompt Artisan</h1>
            <div class="header-controls">
                <div class="lang-switch">
                    <input type="checkbox" id="lang-toggle-checkbox">
                    <label class="lang-switch-label" for="lang-toggle-checkbox">
                        <span class="lang-switch-knob"></span>
                    </label>
                </div>
                <button id="show-manual-btn" title="–ü–æ–º–æ—â—å" data-i18n-title="helpTitle">?</button>
            </div>
        </div>
        <div class="main-content">
            <div class="form-column">
                <div class="tabs">
                    <button class="tab-link active" data-tab="main">üñºÔ∏è <span data-i18n="tabMain">–û—Å–Ω–æ–≤–∞</span></button>
                    <button class="tab-link" data-tab="nsfw">üîû <span data-i18n="tabNsfw">NSFW (18+)</span></button>
                </div>
                <form id="prompt-form">
                    <div id="main" class="tab-content active">
                        <div class="prompt-card">
                            <div class="card-header">
                                <h2 data-i18n="styleSection">–°—Ç–∏–ª—å –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</h2>
                                <span class="tooltip-icon">i<span class="tooltip-text" data-i18n="styleTooltip"></span></span>
                                <button type="button" class="tag-browser-btn" data-target-id="style" data-library="tags-style.json">üìñ</button>
                            </div>
                            <section class="form-section">
                                <div class="input-group">
                                    <textarea class="prompt-part savable-field" id="style" data-i18n-placeholder="stylePlaceholder"></textarea>
                                    <div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">‚ñ≤</button><button type="button" class="weight-btn" data-action="decrease">‚ñº</button></div>
                                </div>
                            </section>
                        </div>
                        <div class="prompt-card">
                            <h2 data-i18n="subjectSection">–°—É–±—ä–µ–∫—Ç –∏ –ü–µ—Ä—Å–æ–Ω–∞–∂</h2>
                            <section class="form-section">
                                <div class="card-header">
                                    <h3 data-i18n="subjectActionHeader">–û—Å–Ω–æ–≤–∞ –∏ –î–µ–π—Å—Ç–≤–∏–µ</h3>
                                    <span class="tooltip-icon">i<span class="tooltip-text" data-i18n="subjectActionTooltip"></span></span>
                                    <button type="button" class="tag-browser-btn" data-target-id="subject_action" data-library="tags-subject.json">üìñ</button>
                                </div>
                                <div class="input-group"><textarea class="prompt-part savable-field" id="subject_action" data-i18n-placeholder="subjectActionPlaceholder"></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">‚ñ≤</button><button type="button" class="weight-btn" data-action="decrease">‚ñº</button></div></div>
                            </section>
                            <section class="form-section">
                                 <div class="card-header">
                                    <h3 data-i18n="appearanceHeader">–í–Ω–µ—à–Ω–æ—Å—Ç—å –∏ –î–µ—Ç–∞–ª–∏</h3>
                                    <span class="tooltip-icon">i<span class="tooltip-text" data-i18n="appearanceTooltip"></span></span>
                                    <button type="button" class="tag-browser-btn" data-target-id="appearance_details" data-library="tags-appearance.json">üìñ</button>
                                </div>
                                <div class="input-group"><textarea class="prompt-part savable-field" id="appearance_details" data-i18n-placeholder="appearancePlaceholder"></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">‚ñ≤</button><button type="button" class="weight-btn" data-action="decrease">‚ñº</button></div></div>
                            </section>
                            <section class="form-section">
                                <div class="card-header">
                                    <h3 data-i18n="clothingHeader">–û–¥–µ–∂–¥–∞ –∏ –°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</h3>
                                    <span class="tooltip-icon">i<span class="tooltip-text" data-i18n="clothingTooltip"></span></span>
                                    <button type="button" class="tag-browser-btn" data-target-id="clothing_gear" data-library="tags-clothing.json">üìñ</button>
                                </div>
                                <div class="input-group"><textarea class="prompt-part savable-field" id="clothing_gear" data-i18n-placeholder="clothingPlaceholder"></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">‚ñ≤</button><button type="button" class="weight-btn" data-action="decrease">‚ñº</button></div></div>
                            </section>
                        </div>
                        <div class="prompt-card">
                            <h2 data-i18n="sceneSection">–°—Ü–µ–Ω–∞ –∏ –ö–æ–º–ø–æ–∑–∏—Ü–∏—è</h2>
                            <section class="form-section">
                                 <div class="card-header">
                                    <h3 data-i18n="locationHeader">–õ–æ–∫–∞—Ü–∏—è –∏ –û–∫—Ä—É–∂–µ–Ω–∏–µ</h3>
                                     <span class="tooltip-icon">i<span class="tooltip-text" data-i18n="locationTooltip"></span></span>
                                    <button type="button" class="tag-browser-btn" data-target-id="location_env" data-library="tags-location.json">üìñ</button>
                                </div>
                                <div class="input-group"><textarea class="prompt-part savable-field" id="location_env" data-i18n-placeholder="locationPlaceholder"></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">‚ñ≤</button><button type="button" class="weight-btn" data-action="decrease">‚ñº</button></div></div>
                            </section>
                            <section class="form-section">
                                <div class="card-header">
                                    <h3 data-i18n="lightingHeader">–û—Å–≤–µ—â–µ–Ω–∏–µ –∏ –ê—Ç–º–æ—Å—Ñ–µ—Ä–∞</h3>
                                    <span class="tooltip-icon">i<span class="tooltip-text" data-i18n="lightingTooltip"></span></span>
                                    <button type="button" class="tag-browser-btn" data-target-id="lighting_atmosphere" data-library="tags-lighting.json">üìñ</button>
                                </div>
                                <div class="input-group"><textarea class="prompt-part savable-field" id="lighting_atmosphere" data-i18n-placeholder="lightingPlaceholder"></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">‚ñ≤</button><button type="button" class="weight-btn" data-action="decrease">‚ñº</button></div></div>
                            </section>
                            <section class="form-section">
                                <div class="card-header">
                                    <h3 data-i18n="cameraHeader">–ö–∞–º–µ—Ä–∞ –∏ –†–∞–∫—É—Ä—Å</h3>
                                    <span class="tooltip-icon">i<span class="tooltip-text" data-i18n="cameraTooltip"></span></span>
                                    <button type="button" class="tag-browser-btn" data-target-id="camera_composition" data-library="tags-camera.json">üìñ</button>
                                </div>
                                <div class="input-group"><textarea class="prompt-part savable-field" id="camera_composition" data-i18n-placeholder="cameraPlaceholder"></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">‚ñ≤</button><button type="button" class="weight-btn" data-action="decrease">‚ñº</button></div></div>
                            </section>
                        </div>
                    </div>
                    <div id="nsfw" class="tab-content">
                        <div class="prompt-card">
                            <h2 data-i18n="nsfwSection">NSFW (18+)</h2>
                            <section class="form-section">
                                <div class="card-header">
                                    <h3 data-i18n="eroticaHeader">–≠—Ä–æ—Ç–∏–∫–∞</h3>
                                     <span class="tooltip-icon">i<span class="tooltip-text" data-i18n="eroticaTooltip"></span></span>
                                    <button type="button" class="tag-browser-btn" data-target-id="nsfw_erotica" data-library="tags-erotica.json">üìñ</button>
                                </div>
                                <div class="input-group"><textarea class="prompt-part savable-field" id="nsfw_erotica" data-i18n-placeholder="eroticaPlaceholder"></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">‚ñ≤</button><button type="button" class="weight-btn" data-action="decrease">‚ñº</button></div></div>
                            </section>
                            <section class="form-section">
                                <div class="card-header">
                                    <h3 data-i18n="ecchiHeader">–≠—Ç—Ç–∏</h3>
                                    <span class="tooltip-icon">i<span class="tooltip-text" data-i18n="ecchiTooltip"></span></span>
                                    <button type="button" class="tag-browser-btn" data-target-id="nsfw_ecchi" data-library="tags-ecchi.json">üìñ</button>
                                </div>
                                <div class="input-group"><textarea class="prompt-part savable-field" id="nsfw_ecchi" data-i18n-placeholder="ecchiPlaceholder"></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">‚ñ≤</button><button type="button" class="weight-btn" data-action="decrease">‚ñº</button></div></div>
                            </section>
                            <section class="form-section">
                                <div class="card-header">
                                    <h3 data-i18n="hentaiHeader">–•–µ–Ω—Ç–∞–π (Explicit)</h3>
                                    <span class="tooltip-icon">i<span class="tooltip-text" data-i18n="hentaiTooltip"></span></span>
                                    <button type="button" class="tag-browser-btn" data-target-id="nsfw_hentai" data-library="tags-hentai.json">üìñ</button>
                                </div>
                                <div class="input-group"><textarea class="prompt-part savable-field" id="nsfw_hentai" data-i18n-placeholder="hentaiPlaceholder"></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">‚ñ≤</button><button type="button" class="weight-btn" data-action="decrease">‚ñº</button></div></div>
                            </section>
                        </div>
                    </div>
                </form>
            </div>

            <aside class="sidebar">
                 <div class="prompt-card">
                    <h2 data-i18n="finalPromptHeader">–ò—Ç–æ–≥–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –∏ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h2>
                    <section class="form-section">
                        <label for="output-positive">Positive Prompt:</label>
                        <textarea id="output-positive"></textarea>
                        <button type="button" id="copy-positive" data-i18n="copyBtn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    </section>
                    <section class="form-section">
                        <label for="output-negative">Negative Prompt:</label>
                        <textarea class="savable-field" id="output-negative"></textarea>
                        <button type="button" id="copy-negative" data-i18n="copyBtn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    </section>
                    <hr class="divider">
                    <section class="form-section quality-toggle-wrapper">
                        <input type="checkbox" id="quality-toggle" checked>
                        <label for="quality-toggle" data-i18n="qualityToggle">–î–æ–±–∞–≤–ª—è—Ç—å —Ç–µ–≥–∏ –∫–∞—á–µ—Å—Ç–≤–∞</label>
                    </section>
                    <section class="form-section actions">
                        <button type="button" id="rebuild-prompt" data-i18n="rebuildBtn" data-i18n-title="rebuildBtnTitle" title="–°–±—Ä–æ—Å–∏—Ç—å —Ä—É—á–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç –∑–∞–Ω–æ–≤–æ">–ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–º–ø—Ç</button>
                        <button type="reset" id="clear-form" form="prompt-form" data-i18n="clearBtn">–û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É</button>
                    </section>
                </div>

                <div class="prompt-card">
                    <h2 data-i18n="presetsHeader">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ü—Ä–µ—Å–µ—Ç–∞–º–∏</h2>
                    <section class="form-section preset-selection-group">
                        <select id="preset-select"></select>
                        <button type="button" id="delete-preset-btn" data-i18n="deletePresetBtn">–£–¥–∞–ª–∏—Ç—å</button>
                    </section>
                    <section class="form-section">
                        <div id="preset-preview" data-hidden="true">
                            <span class="placeholder" data-i18n="presetPreviewPlaceholder"></span>
                        </div>
                    </section>
                    <hr class="divider">
                    <section class="form-section">
                        <div class="preset-controls save-group">
                            <input type="text" id="preset-name" data-i18n-placeholder="presetNamePlaceholder" placeholder="–ò–º—è –Ω–æ–≤–æ–≥–æ –ø—Ä–µ—Å–µ—Ç–∞">
                            <button type="button" id="save-preset-btn" data-i18n="savePresetBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </div>
                    </section>
                    <section class="form-section actions preset-actions">
                        <button type="button" id="import-presets-btn" data-i18n="importBtn">–ò–º–ø–æ—Ä—Ç</button>
                        <button type="button" id="export-presets-btn" data-i18n="exportBtn">–≠–∫—Å–ø–æ—Ä—Ç</button>
                    </section>
                </div>
            </aside>
        </div>
        <footer>
            <span data-i18n="footerText">&copy; 2025 Created by grvelvet</span>
        </footer>
    </div>

    <div id="manual-modal" class="modal-overlay" data-visible="false">
        <div class="modal-content">
            <button id="close-manual-btn" class="modal-close-btn" data-i18n-title="closeBtnTitle" title="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
            <div class="manual-body"><div class="spinner"></div></div>
        </div>
    </div>
    
    <div id="tag-browser-modal" class="modal-overlay" data-visible="false">
        <div class="modal-content tag-browser-content">
            <button id="close-tag-browser-btn" class="modal-close-btn" data-i18n-title="closeBtnTitle" title="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
            <h2 id="tag-browser-title"></h2>
            <div class="tag-browser-body">
                <aside id="tag-browser-subcategories"></aside>
                <main id="tag-browser-tags">
                    <input type="search" id="tag-browser-search">
                    <div id="tag-browser-tags-list"></div>
                </main>
            </div>
            <footer class="tag-browser-footer">
                <div id="tag-browser-selection-preview"></div>
                <button type="button" id="add-selected-tags-btn" disabled></button>
            </footer>
        </div>
    </div>

    <script src="script.js" defer></script>
</body>
</html>