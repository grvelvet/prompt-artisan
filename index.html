<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="appTitle">Prompt Artisan</title>
    <!-- Подключение шрифтов -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Fira+Code:wght@500&display=swap" rel="stylesheet">
    <!-- Подключение стилей -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header-main">
            <h1 id="app-title">Prompt Artisan</h1>
            <div class="header-controls">
                <div class="lang-switch">
                    <input type="checkbox" id="lang-toggle-checkbox">
                    <label class="lang-switch-label" for="lang-toggle-checkbox">
                        <span class="lang-switch-knob"></span>
                    </label>
                </div>
                <button id="show-manual-btn" title="Помощь" data-i18n-title="helpTitle">?</button>
            </div>
        </div>
        <div class="main-content">
            <form id="prompt-form">
                <div class="prompt-card">
                    <h2 data-i18n="subjectHeader">Субъект и действие</h2>
                    <section class="form-section">
                        <h3 data-i18n="appearanceHeader">Внешность</h3>
                        <div class="input-group"><textarea class="prompt-part savable-field" id="appearance" data-i18n-placeholder="appearancePlaceholder" placeholder="девушка, long hair, blue eyes..."></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">▲</button><button type="button" class="weight-btn" data-action="decrease">▼</button></div></div>
                    </section>
                    <section class="form-section">
                        <h3 data-i18n="clothingHeader">Одежда и аксессуары</h3>
                        <div class="input-group"><textarea class="prompt-part savable-field" id="clothing" data-i18n-placeholder="clothingPlaceholder" placeholder="elegant dress, red shoes..."></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">▲</button><button type="button" class="weight-btn" data-action="decrease">▼</button></div></div>
                    </section>
                    <section class="form-section">
                        <h3 data-i18n="poseHeader">Поза и действие</h3>
                        <div class="input-group"><textarea class="prompt-part savable-field" id="pose" data-i18n-placeholder="posePlaceholder" placeholder="standing, looking at viewer..."></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">▲</button><button type="button" class="weight-btn" data-action="decrease">▼</button></div></div>
                    </section>
                </div>

                <div class="prompt-card">
                    <h2 data-i18n="compositionHeader">Композиция, сцена, стиль</h2>
                    <section class="form-section">
                        <h3 data-i18n="locationHeader">Окружение (Локация)</h3>
                        <div class="input-group"><textarea class="prompt-part savable-field" id="location" data-i18n-placeholder="locationPlaceholder" placeholder="in a forest, city background..."></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">▲</button><button type="button" class="weight-btn" data-action="decrease">▼</button></div></div>
                    </section>
                    <section class="form-section">
                        <h3 data-i18n="lightingHeader">Освещение и атмосфера</h3>
                        <div class="input-group"><textarea class="prompt-part savable-field" id="lighting" data-i18n-placeholder="lightingPlaceholder" placeholder="cinematic lighting, dark background..."></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">▲</button><button type="button" class="weight-btn" data-action="decrease">▼</button></div></div>
                    </section>
                    <section class="form-section">
                        <h3 data-i18n="cameraHeader">Камера и композиция</h3>
                        <div class="input-group"><textarea class="prompt-part savable-field" id="camera" data-i18n-placeholder="cameraPlaceholder" placeholder="medium shot, bokeh, blurry background..."></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">▲</button><button type="button" class="weight-btn" data-action="decrease">▼</button></div></div>
                    </section>
                    <section class="form-section">
                        <h3 data-i18n="styleHeader">Стиль и качество арта</h3>
                        <div class="input-group"><textarea class="prompt-part savable-field" id="style-quality" data-i18n-placeholder="stylePlaceholder" placeholder="photorealistic, masterpiece, detailed bg..."></textarea><div class="weight-controls"><button type="button" class="weight-btn" data-action="increase">▲</button><button type="button" class="weight-btn" data-action="decrease">▼</button></div></div>
                    </section>
                </div>
                
                <div class="prompt-card">
                    <h2 data-i18n="advancedHeader">Продвинутые настройки</h2>
                    <section class="form-section">
                        <h3 data-i18n="loraHeader">LoRA / Trigger Words</h3>
                        <div class="input-group">
                            <textarea class="prompt-part savable-field" id="loras" data-i18n-placeholder="loraPlaceholder" placeholder="<lora:имя:сила> или триггерные слова"></textarea>
                        </div>
                    </section>
                </div>
            </form>

            <aside class="sidebar">
                <div class="prompt-card">
                    <h2 data-i18n="finalPromptHeader">Итоговый промпт</h2>
                    <section class="form-section">
                        <label for="output-positive">Positive Prompt:</label>
                        <textarea id="output-positive"></textarea>
                        <button type="button" id="copy-positive" data-i18n="copyBtn">Копировать</button>
                    </section>
                    <section class="form-section">
                        <label for="output-negative">Negative Prompt:</label>
                        <textarea class="savable-field" id="output-negative"></textarea>
                        <button type="button" id="copy-negative" data-i18n="copyBtn">Копировать</button>
                    </section>
                </div>

                <div class="prompt-card">
                    <h2 data-i18n="formManagementHeader">Управление формой</h2>
                    <section class="form-section actions">
                        <button type="button" id="rebuild-prompt" data-i18n="rebuildBtn">Пересобрать промпт</button>
                        <button type="reset" id="clear-form" form="prompt-form" data-i18n="clearBtn">Очистить форму</button>
                    </section>
                    <section class="form-section quality-toggle-wrapper">
                        <input type="checkbox" id="quality-toggle" checked>
                        <label for="quality-toggle" data-i18n="qualityToggle">Добавлять теги качества</label>
                    </section>
                </div>

                <div class="prompt-card">
                    <h2 data-i18n="presetsHeader">Управление Пресетами</h2>
                    
                    <section class="form-section">
                        <select id="preset-select"></select>
                    </section>

                    <section class="form-section">
                        <div id="preset-preview">
                            <span class="placeholder" data-i18n="presetPreviewPlaceholder">Импортируйте файл или сохраните пресет</span>
                        </div>
                    </section>

                    <hr class="divider">

                    <section class="form-section">
                        <div class="preset-controls save-group">
                            <input type="text" id="preset-name" data-i18n-placeholder="presetNamePlaceholder" placeholder="Имя нового пресета">
                            <button type="button" id="save-preset-btn" data-i18n="savePresetBtn">Сохранить</button>
                        </div>
                    </section>
                    
                    <section class="form-section actions preset-actions">
                        <button type="button" id="load-preset-btn" data-i18n="loadPresetBtn">Загрузить</button>
                        <button type="button" id="delete-preset-btn" data-i18n="deletePresetBtn">Удалить</button>
                        <button type="button" id="import-presets-btn" data-i18n="importBtn">Импорт</button>
                        <button type="button" id="export-presets-btn" data-i18n="exportBtn">Экспорт</button>
                    </section>
                </div>
            </aside>
        </div>
        <footer>
            <span data-i18n="footerText">&copy; 2025 Created by grvelvet</span>
        </footer>
    </div>

    <div id="manual-modal" class="modal-overlay" data-visible="false">
        <div class="modal-content">
            <button id="close-manual-btn" class="modal-close-btn" data-i18n-title="closeBtnTitle" title="Закрыть">&times;</button>
            <div class="manual-body"><div class="spinner"></div></div>
        </div>
    </div>

    <script src="script.js" defer></script>
</body>
</html>